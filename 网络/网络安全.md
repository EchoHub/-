# 网络安全

### XSS攻击：脚本注入攻击，攻击者通过注入恶意脚本的方式，使之在用户界面上运行，从而获取到用户的Cookie、SessionID等，进而危害数据安全。
- 产生原因：攻击者通过恶意植入的方式注入网站，站点未进行代码过滤，从而导致恶意代码与正常的代码混淆，浏览器无法识别哪些代码是恶意的，从而正常执行恶意注入的代码。

- 不可信输入路径：
    - 用户的UGC内容
    - URL参数
    - 第三方链接
    - POST参数
    - Referer（不可信涞源的Referer）
    - Cookie（来自其他子域的cookie）

- ”危害“有哪些：
    - 劫持用户的cookie信息发送到攻击者的服务器
    - 钓鱼网站
    - 其他 ...

- XSS的分类：
    - 存储型
    - 反射型
    - DOM型（前端相关！！！）
        - 攻击者构造特殊的URL
        - 用户打开URL
        - 浏览器接收并解析、执行
        - 恶意代码窃取用户信息并上报攻击者服务器，或冒充用户调用接口攻击服务器

- XSS实现的因素
    - 攻击者提交恶意代码
    - 浏览器执行恶意代码

- XSS攻击预防：
    - 输入过滤，对用户输入内容进行转义、规则过滤等
        - 对特殊字符进行转译
            - 原因：攻击者可以通过特殊字符突破原本属性的限制，从而形成有效代码进行攻击
        - 对内容进行校验，避免javascript以及其他非法schema开头的链接格式内容
            - 原因：攻击者可以通过类似javascript:形式构建非法链接或者构造执行代码
        - 对内联json进行转义
    - 防止浏览器执行恶意代码：
        - 纯前端渲染（存储型、反射型）
        - HTML充分转义（存储型、反射型）
        - 避免使用innerHTML等方式
    - 其他方式
        - 对Cookie限制httpOnly
        - 采取CSP策略（内容安全策略），明确客户端哪些资源可被使用和加载

### CSRF攻击：跨站请求伪造攻击
- 触发原理：攻击者诱导被攻击者打开第三方链接，在第三方页面中，向被攻击者发起请求，利用被攻击者在被攻击网站获取到的的用户凭证信息，绕后后台验证，从而冒充用户对被攻击网站进行某些操作
- 触发流程模拟
    - 用户登陆A网站，保存了A网站的登陆凭证
    - 攻击者引导用户访问B网站
    - B网站向A网站发起请求
    - 利用用户在A网站的登陆凭证，让A网站误以为是用户发起，从而通过用户校验，进行请求执行
    - 攻击者冒用用户执行请求进行攻击
- CSRF攻击类型
    - GET请求型
    - POST请求型
    - 链接型
- 特点
    - 一般由第三方网站发起
    - 攻击者在被攻击网站冒充用户进行操作，但并不能直接获取数据
    - 攻击者只能利用用户凭证，而无法获取
    - 跨域请求的方式一般通过图片链接、超链接、Form提交等
- 防范
    - 禁止不知名域名
        - 同源检测
    - 提交时附带本域信息
        - 双Cookie验证等

### 网络劫持


### 非法调用Bybrid API